<!doctype HTML>
<html>

<head>
  <title>instant Art</title>
  <link href="https://fonts.googleapis.com/css?family=Shrikhand" rel="stylesheet">

  <style>
    #title {
      font-family: Shrikhand, cursive;
      font-size: 50px;
      color: black;
      letter-spacing: 3px;
      margin-top: 1000px;
      transition: all 0.5s ease-in-out;
    }

    body{
      transition: all 0.2s ease-in-out;
    }

    span{
      transition: all 0.5s ease-in-out;
    }

    a:hover{
      cursor: pointer;
    }

    #title:hover{
      color: #ffc107;
    }

    #title:hover span{
      color: #ff0000;
    }

    center{
      margin-top: 50px;
    }

    canvas{
      margin-top: 60px;
      box-shadow: 5px 5px 16px 0px rgba(171,171,171,0.82);
      visibility: hidden;
    }

    #text{
      position: static;
      font-size: 14px;
      letter-spacing: 1px;
      font-family: Shrikhand, cursive;
      color: red;
      margin-left: 300px;
      margin-top: -20px;
      transform: rotate(-20deg);
      transition: all 0.5s ease-in-out;
    }

    #text:hover{
      transform: rotate(-25deg);
    }

  </style>
</head>

<body>
  <center><a id="title" onClick="colorPixels()">instant <span>ART</span></a>
    <a onClick="drawEasterEgg()"><p id="text">Striped</a> <a onClick="saveAsPNG(c,'stripes')">patterns!</p></a>

  <div id="container"><canvas id="canvas" height="300px" width="300px"></canvas></div>

</center>



  <script>

  document.addEventListener('mousedown', function (event) {
    if (event.detail > 1) {
      event.preventDefault();
      }
    }, false);

  var c=document.getElementById("canvas");
  var ctx=c.getContext("2d");
  ctx.clearRect(0, 0, c.width, c.height);
  var pixelSize = c.width/10;
  var sizes = [c.width/10,c.width/6,c.width/3]; 

  function colorPixels(){
    pixelSize = sizes[Math.floor(Math.random() * 3)];
    console.log(pixelSize);
    var x = 0;
    var y = 0;
    ctx.clearRect(0, 0, c.width, c.height);
    while(y <= c.height - pixelSize && x <= c.width-pixelSize){
      ctx.fillStyle = '#'+ Math.random().toString(16).slice(-6);
      var stripeLength = Math.floor(Math.random() * (c.width/pixelSize)) + 1;
      
      for(var k = 0; k < stripeLength; k++){
        ctx.fillRect(x,y,pixelSize,pixelSize);
        if(x == c.width-pixelSize){
          x = 0;
          y += pixelSize;
          break;
        } 
        else{
          x += pixelSize;
        }
      }
    }
    setBackground(); 
  }
    /* rythmical lines -- great random
    var x = 0;
    var y = 0;
    ctx.clearRect(0, 0, c.width, c.height);
    while(y <= c.height - pixelSize && x <= c.width-pixelSize){
      if(isBlank(x,y)){
        ctx.fillStyle = '#'+ Math.random().toString(16).slice(-6);
        var stripeLength = Math.floor(Math.random() * 6) + 1;
        var orientation = Math.round(Math.random());
        
        for(var k = 0; k < stripeLength; k++){
          ctx.fillRect(x,y,pixelSize,pixelSize);
          switch(orientation){
            case 0:
              if(x == c.width-pixelSize){
                x = 0;
                y += pixelSize;
                break;
              } 
              else{
                x += pixelSize;
              }
              break;
            case 1:
              if(y == c.height - pixelSize){
                y = 0;
                x += pixelSize;
                break;
              } 
              else{
                y += pixelSize;
              }
              break;
          }
        }
      }
      else{
        x += pixelSize;
      }

      
    }

    function isBlank(x,y){
      var temp = ctx.getImageData(x,y,1,1);
      if(temp.data[1] == 0 && temp.data[2] == 0 && temp.data[3] == 0){
        return true;
      }
      return false;
    }*/

  function setBackground(){
    var img = c.toDataURL();
    document.body.style.background = "url(" +img+ ")";
  }


  function drawEasterEgg(){
    var x = 0;
    var y = 0;
    var code ="100000000110000000011000000001010000001001000000100100000010010000001001000000100100000010001100110000110011000011001100000011000000001100000000110000000000000000000000000000000000100000000110000000011000000001010000001001000000100100000010010000001001000000100100000010001100110000110011000011001100000011000000001100000000110000000000000000000000000000000000100000000110000000011000000001010000001001000000100100000010010000001001000000100100000010001100110000110011000011001100000011000000001100000000110000000000000000000000000000000000100000000110000000011000000001010000001001000000100100000010010000001001000000100100000010001100110000110011000011001100000011000000001100000000110000000000000000000000000000000000100000000110000000011000000001010000001001000000100100000010010000001001000000100100000010001100110000110011000011001100000011000000001100000000110000000000000000000000000000000000";
    var color1 = '#'+ Math.random().toString(16).slice(-6);
    var color2 = '#'+ Math.random().toString(16).slice(-6);

    ctx.clearRect(0, 0, c.width, c.height);
    var pixelSize = Math.round(c.height/(Math.sqrt(code.length)));
    for(var i = 0; i < code.length; i++){
      switch(code[i]){
        case '0':
          ctx.fillStyle = color1;
          break;

        case '1':
          ctx.fillStyle = color2;
          break;
      }
      ctx.fillRect(x,y,pixelSize,pixelSize);
      if(x >= c.width-pixelSize){
        x = 0;
        y += pixelSize;
      }
      else{
        x += pixelSize;
      }
    }
    setBackground();
  }

  function saveAsPNG(image, filename){ // No IE <11 support. Chrome URL bug for large images may crash
    var anchorElement, event, blob;
    function image2Canvas(image){  // converts an image to canvas
        function createCanvas(width, height){  // creates a canvas of width height
            var can = document.createElement("canvas");
            can.width = width;
            can.height = height;
            return can;
        };
        var newImage = canvas(img.width, img.height); // create new image
        newImage.ctx = newImage.getContext("2d");  // get image context
        newImage.ctx.drawImage(image, 0, 0); // draw the image onto the canvas
        return newImage;  // return the new image
    }
    if(image.toDataURL === undefined){    // does the image have the toDataURL function
        image = image2Canvas(image);  // No then convert to canvas
    }
    // if msToBlob and msSaveBlob then use them to save. IE >= 10
    // As suggested by Kaiido 
    if(image.msToBlob !== undefined && navigator.msSaveBlob !== undefined){ 
       blob = image.msToBlob(); 
       navigator.msSaveBlob(blob, filename + ".png"); 
       return;
    }
    anchorElement = document.createElement('a');  // Create a download link
    anchorElement.href = image.toDataURL();   // attach the image data URL
    // check for download attribute
    if ( anchorElement.download !== undefined ) {
        anchorElement.download = filename + ".png";  // set the download filename
        if (typeof MouseEvent === "function") {   // does the browser support the object MouseEvent
            event = new MouseEvent(   // yes create a new mouse click event
                "click", {
                    view        : window,
                    bubbles     : true,
                    cancelable  : true,
                    ctrlKey     : false,
                    altKey      : false,
                    shiftKey    : false,
                    metaKey     : false,
                    button      : 0,
                    buttons     : 1,
                }
            );
            anchorElement.dispatchEvent(event); // simulate a click on the download link.
        } else
        if (anchorElement.fireEvent) {    // if no MouseEvent object try fireEvent 
            anchorElement.fireEvent("onclick");
        }
    }
}

  </script>
</body>

</html>
